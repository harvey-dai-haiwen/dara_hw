(self.webpackChunkhimerometra=self.webpackChunkhimerometra||[]).push([[678],{6954:function(e,t,n){"use strict";n.d(t,{ZP:function(){return F}});var r=n(7462),a=n(4942),o=n(9439),l=n(5900),i=n.n(l),s=n(1637),c=n(7294),u=n(7170),d=n(2592),f=n(8829),m=c.createContext(null),p=m.Provider,h=m,v=c.createContext(null),y=v.Provider,x=n(8837),b=n(2275),g=n(3286),E=n(5766),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},C=function(e,t){var n,o=c.useContext(h),l=c.useContext(v),s=c.useContext(u.E_),d=s.getPrefixCls,f=s.direction,m=c.useRef(),p=(0,b.sQ)(t,m),y=(0,c.useContext)(E.aM).isFormItemInput,C=e.prefixCls,Z=e.className,S=e.children,k=e.style,P=e.disabled,O=w(e,["prefixCls","className","children","style","disabled"]),_=d("radio",C),D="button"===((null==o?void 0:o.optionType)||l)?"".concat(_,"-button"):_,F=(0,r.Z)({},O),I=c.useContext(g.Z);F.disabled=P||I,o&&(F.name=o.name,F.onChange=function(t){var n,r;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(r=null==o?void 0:o.onChange)||void 0===r||r.call(o,t)},F.checked=e.value===o.value,F.disabled=F.disabled||o.disabled);var N=i()("".concat(D,"-wrapper"),(n={},(0,a.Z)(n,"".concat(D,"-wrapper-checked"),F.checked),(0,a.Z)(n,"".concat(D,"-wrapper-disabled"),F.disabled),(0,a.Z)(n,"".concat(D,"-wrapper-rtl"),"rtl"===f),(0,a.Z)(n,"".concat(D,"-wrapper-in-form-item"),y),n),Z);return c.createElement("label",{className:N,style:k,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},c.createElement(x.Z,(0,r.Z)({},F,{type:"radio",prefixCls:D,ref:p})),void 0!==S?c.createElement("span",null,S):null)};var Z=c.forwardRef(C),S=c.forwardRef((function(e,t){var n,l=c.useContext(u.E_),m=l.getPrefixCls,h=l.direction,v=c.useContext(d.Z),y=(0,s.Z)(e.defaultValue,{value:e.value}),x=(0,o.Z)(y,2),b=x[0],g=x[1],E=e.prefixCls,w=e.className,C=void 0===w?"":w,S=e.options,k=e.buttonStyle,P=void 0===k?"outline":k,O=e.disabled,_=e.children,D=e.size,F=e.style,I=e.id,N=e.onMouseEnter,M=e.onMouseLeave,R=e.onFocus,A=e.onBlur,T=m("radio",E),j="".concat(T,"-group"),L=_;S&&S.length>0&&(L=S.map((function(e){return"string"==typeof e||"number"==typeof e?c.createElement(Z,{key:e.toString(),prefixCls:T,disabled:O,value:e,checked:b===e},e):c.createElement(Z,{key:"radio-group-value-options-".concat(e.value),prefixCls:T,disabled:e.disabled||O,value:e.value,checked:b===e.value,style:e.style},e.label)})));var B=D||v,X=i()(j,"".concat(j,"-").concat(P),(n={},(0,a.Z)(n,"".concat(j,"-").concat(B),B),(0,a.Z)(n,"".concat(j,"-rtl"),"rtl"===h),n),C);return c.createElement("div",(0,r.Z)({},(0,f.Z)(e),{className:X,style:F,onMouseEnter:N,onMouseLeave:M,onFocus:R,onBlur:A,id:I,ref:t}),c.createElement(p,{value:{onChange:function(t){var n=b,r=t.target.value;"value"in e||g(r);var a=e.onChange;a&&r!==n&&a(t)},value:b,disabled:e.disabled,name:e.name,optionType:e.optionType}},L))})),k=c.memo(S),P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},O=function(e,t){var n=c.useContext(u.E_).getPrefixCls,a=e.prefixCls,o=P(e,["prefixCls"]),l=n("radio",a);return c.createElement(y,{value:"button"},c.createElement(Z,(0,r.Z)({prefixCls:l},o,{type:"radio",ref:t})))},_=c.forwardRef(O),D=Z;D.Button=_,D.Group=k,D.__ANT_RADIO=!0;var F=D},8837:function(e,t,n){"use strict";var r=n(7462),a=n(1413),o=n(4942),l=n(9439),i=n(4925),s=n(5900),c=n.n(s),u=n(1637),d=n(7294),f=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],m=(0,d.forwardRef)((function(e,t){var n,s=e.prefixCls,m=void 0===s?"rc-checkbox":s,p=e.className,h=e.style,v=e.checked,y=e.disabled,x=e.defaultChecked,b=void 0!==x&&x,g=e.type,E=void 0===g?"checkbox":g,w=e.onChange,C=(0,i.Z)(e,f),Z=(0,d.useRef)(null),S=(0,u.Z)(b,{value:v}),k=(0,l.Z)(S,2),P=k[0],O=k[1];(0,d.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=Z.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=Z.current)||void 0===e||e.blur()},input:Z.current}}));var _=c()(m,p,(n={},(0,o.Z)(n,"".concat(m,"-checked"),P),(0,o.Z)(n,"".concat(m,"-disabled"),y),n));return d.createElement("span",{className:_,style:h},d.createElement("input",(0,r.Z)({},C,{className:"".concat(m,"-input"),ref:Z,onChange:function(t){y||("checked"in e||O(t.target.checked),null==w||w({target:(0,a.Z)((0,a.Z)({},e),{},{type:E,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:y,checked:!!P,type:E})),d.createElement("span",{className:"".concat(m,"-inner")}))}));t.Z=m},3198:function(e,t,n){"use strict";var r;function a(e){if("undefined"==typeof document)return 0;if(e||void 0===r){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),a=n.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var l=t.offsetWidth;o===l&&(l=n.clientWidth),document.body.removeChild(n),r=o-l}return r}function o(e){var t=e.match(/^(.*)px$/),n=Number(null==t?void 0:t[1]);return Number.isNaN(n)?a():n}function l(e){if(!("undefined"!=typeof document&&e&&e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),n=t.width,r=t.height;return{width:o(n),height:o(r)}}n.d(t,{Z:function(){return a},o:function(){return l}})},9483:function(e,t,n){var r=n(4411),a=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(a(e)+" is not a constructor")}},4411:function(e,t,n){var r=n(1702),a=n(7293),o=n(614),l=n(648),i=n(5005),s=n(2788),c=function(){},u=[],d=i("Reflect","construct"),f=/^\s*(?:class|function)\b/,m=r(f.exec),p=!f.exec(c),h=function(e){if(!o(e))return!1;try{return d(c,u,e),!0}catch(t){return!1}},v=function(e){if(!o(e))return!1;switch(l(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!m(f,s(e))}catch(t){return!0}};v.sham=!0,e.exports=!d||a((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?v:h},8523:function(e,t,n){"use strict";var r=n(9662),a=TypeError,o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw a("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},2492:function(e,t,n){var r=n(7854);e.exports=r.Promise},9478:function(e,t,n){var r=n(9670),a=n(111),o=n(8523);e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},6707:function(e,t,n){var r=n(9670),a=n(9483),o=n(8554),l=n(5112)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||o(n=r(i)[l])?t:a(n)}},7727:function(e,t,n){"use strict";var r=n(2109),a=n(1913),o=n(2492),l=n(7293),i=n(5005),s=n(614),c=n(6707),u=n(9478),d=n(8052),f=o&&o.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&l((function(){f.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,i("Promise")),n=s(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!a&&s(o)){var m=i("Promise").prototype.finally;f.finally!==m&&d(f,"finally",m,{unsafe:!0})}},7704:function(e,t,n){"use strict";n.r(t);n(7727);var r=n(7294),a=n(3494),o=n(9926),l=n(6304),i=n(3109),s=n(2419),c=n(1656),u=n(8335),d=n(5578),f=n(6954),m=n(3077),p=n(3444),h=n(3299),v=n(2210);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=l.Z.confirm,g=i.Z.Dragger,E=a.default.div.withConfig({displayName:"pages__Container",componentId:"sc-o2ztc4-0"})(["font-size:1rem;display:flex;flex-direction:column;justify-content:center;align-items:center;align-content:center;& code{background-color:rgba(0,0,0,0.1);border-radius:6px;padding:.2em .4em;font-size:85%;text-align:center;}.center-text{text-align:center;}.center{text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;}"]),w=["synchrotron","Aeris-fds-Pixcel1d-Medipix3","LBL-d8-LynxEyeXE","d8-solxe-fds-0600","siemens-d5000-fds1mm","RMS-D8-ADS-15-LynxEyeXE","RMS-D8-ADS-15-Glass-LynxEyeXE","x8-apex2-fds-10","xpert-xcel-ads-10mm","d8-lynxeye-fds-02","cubix-ads-15mm","xpert-xcel-htk-ads-10","siemens-d5000-fds1mm-2","siemens-d5000-fds2mm","rigaku-ultima","d2-ssd160-fds-1","cubix-ads-10mm","Rigaku-Miniflex-600-DTEXultra2-fds","RMS-D8-Capillary-500um-LynxEyeXE","d8-fds-02-LynxEyeXE","pw1800-fds","RMS-D8-FDS-03-LynxEyeXE","d8-lynxeye-fds-06mm","xpert-xcel-htk-fds-0125","PW3040-FDS-ADS-Xcelerator","Rigaku-SmartLab-CBO-BB-FDS05deg","d8-lynxeye-fds-05mm","d8-lynxeye-ads-1mm","D8_6Div_4SS","Rigaku-Miniflex-gen5-Dtex-varfix","Rigaku-Miniflex-gen5-Dtex-var","xpert-xcel-fds-1000","pw1800-ads-10mm","Rigaku-Miniflex","d8-solxe-vds-12mm","xpert-xcel-fds-0125","xpert-xcel-ads-10mm-Ge","xpert-xcel-fds-0250","xpert-pixcel-0500"],C=[["Cu",1.540598],["Co",1.78901],["Cr",2.28976],["Fe",1.936042]];t.default=function(){var e=s.Z.useForm()[0],t=(0,r.useState)(!1),n=t[0],a=t[1],l=(0,r.useState)(!1),i=l[0],x=l[1],Z=(0,r.useState)("Aeris-fds-Pixcel1d-Medipix3"),S=Z[0],k=Z[1],P=(0,r.useState)(null),O=P[0],_=P[1],D=c.ZP.useMessage(),F=D[0],I=D[1],N=r.useState(!1),M=N[0],R=N[1];return r.createElement(o.Z,{hasSider:!1,title:"Submit"},I,r.createElement(E,null,r.createElement("div",{style:{marginBottom:"20px",padding:"16px",background:"#e6f7ff",borderRadius:"8px",width:"60%"}},r.createElement("h3",{style:{margin:"0 0 12px 0"}},"🎯 新功能：Local Database Search"),r.createElement("p",{style:{margin:"0 0 8px 0"}},"支持 COD、ICSD、MP Database Selection和化学系统过滤"),r.createElement("a",{href:"/search",style:{fontSize:"16px",fontWeight:"bold"}},"→ Go to Local Database Search Page")),O?r.createElement(u.Z,{message:O,type:"error",showIcon:!0,closable:!0,style:{width:"50%"}}):r.createElement(r.Fragment,null),r.createElement("h1",null,"Submit refinement run to Dara system (Original Reaction Predictor)"),r.createElement(s.Z,Object.assign({},{labelCol:{span:10},wrapperCol:{span:14}},{style:{width:"60%"},form:e,initialValues:{use_rxn_predictor:!1,temperature:null,wavelength_lab:"Cu",instrument_profile:"Aeris-fds-Pixcel1d-Medipix3",synchrotron:!1},onValuesChange:function(e,t){a(t.use_rxn_predictor)}}),r.createElement(s.Z.Item,{label:"User",name:"user",tooltip:"The username for this refinement. It can be any string that will be shown with the result later.",rules:[{required:!0,message:"Please input your username!"}]},r.createElement(d.Z,{placeholder:"Username that submits this search run"})),r.createElement(s.Z.Item,{label:"Use reaction network?",name:"use_rxn_predictor",tooltip:"Whether to use reaction-network to filter the phases based on energy."},r.createElement(f.ZP.Group,{value:n,buttonStyle:"solid"},r.createElement(f.ZP.Button,{value:!0},"Yes"),r.createElement(f.ZP.Button,{value:!1},"No"))),r.createElement(s.Z.Item,{label:n?"Precursors Formulas":"Included elements",name:"precursor_formulas",rules:[{required:!0,message:"Please input the formula!"}],tooltip:n?"Example: Bi2O3, Fe2O3":"Example: Bi,Fe,O"},r.createElement(d.Z,{placeholder:"If more than one, separate them by comma"})),r.createElement(s.Z.Item,{label:"Temperature",name:"temperature",rules:[{required:n,message:"Please input the temperature!"}],hidden:!n},r.createElement(d.Z,{placeholder:"The temperature (°C) to synthesize the sample."})),r.createElement(s.Z.Item,{label:"Instrument Profile",name:"instrument_profile",tooltip:"The instrument name for collecting the pattern."},r.createElement(m.Z,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){var n;return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:w.map((function(e){return{label:e,value:e}}))})),r.createElement(s.Z.Item,{label:"Synchrotron",name:"synchrotron",tooltip:"Whether the data is collected from synchrotron."},r.createElement(p.Z,{onChange:function(t){x(t),t?(k(e.getFieldValue("instrument_profile")),e.setFieldsValue({instrument_profile:"synchrotron"})):e.setFieldsValue({instrument_profile:S})}})),i?r.createElement(s.Z.Item,{label:"Wavelength",name:"wavelength_sync",tooltip:"The wavelength of X-ray for collecting the pattern.",rules:[{required:!0,message:"Please input a valid wavelength!",pattern:/^\d+(\.\d+)?$/}]},r.createElement(d.Z,{placeholder:"The wavelength of X-ray for collecting the pattern.",suffix:"Å"})):r.createElement(s.Z.Item,{label:"Wavelength",name:"wavelength_lab",tooltip:"The wavelength in nm of X-ray for collecting the pattern.",rules:[{required:!0,message:"Please input the wavelength!"}]},r.createElement(m.Z,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){var n;return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:C.map((function(e){return{value:e[0],label:e[0]+" ("+e[1].toFixed(4)+" Å)"}}))})),r.createElement(s.Z.Item,{label:"Upload XRD pattern file",name:"pattern_file",rules:[{required:!0,message:"Please upload the XRD pattern file!"}],tooltip:"Currently support xy/xrdml/raw/txt file"},r.createElement(g,{maxCount:1,beforeUpload:function(){return!1},onChange:function(t){e.setFieldValue("pattern_file",t.file)},onDrop:function(t){e.setFieldValue("pattern_file",t.file)}},r.createElement("p",{className:"ant-upload-drag-icon"},r.createElement(v.Z,null)),r.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.createElement("p",{className:"ant-upload-hint"},"Supprted file types: xy(e) / xrdml / raw / txt"))),r.createElement(s.Z.Item,{className:"center"},r.createElement(h.Z,{type:"primary",htmlType:"submit",size:"large",onClick:function(){var t=new FormData,r=e.getFieldsValue();for(var a in r){if(void 0===r[a])return;"precursor_formulas"===a?t.append(a,JSON.stringify(r[a].split(",").map((function(e){return e.trim()})))):"temperature"===a?t.append(a,n?r[a]:-1e3):a.startsWith("wavelength")?i?t.append("wavelength",Number(r[a])/10):t.append("wavelength",r[a]):t.append(a,r[a])}for(var o,l=y(t.keys());!(o=l()).done;){var s=o.value;console.log(s,t.get(s))}var c=new AbortController;_(null),R(!0),b({title:"Do you want to submit the task?",onOk:function(){return fetch("/api/submit",{method:"POST",body:t,signal:c.signal}).then((function(e){return e.json()})).then((function(t){"submitted"===t.message?(e.resetFields(),F.open({type:"success",content:"The refinement task has been submitted successfully!"})):_(JSON.stringify(t))})).finally((function(){return R(!1)})).catch((function(e){"AbortError"!==e.name&&_(e)}))},onCancel:function(){c.abort(),R(!1)}})},disabled:M},"Submit")))))}}}]);
//# sourceMappingURL=component---src-pages-index-js-f969e4b74a60b875a42b.js.map